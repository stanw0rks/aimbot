--[[

	Advanced PVP Cheat Menu - Mobile & PC Supported
	Features: Aimbot, ESP, Speed, Jump Power, Infinite Ammo, No Recoil
	Modified from Universal Aimbot by Exunys

]]

--// Cache

local game, workspace = game, workspace
local getrawmetatable, getmetatable, pcall, getgenv, next, tick = getrawmetatable, getmetatable, pcall, getgenv, next, tick
local Vector2new, Vector3zero, Vector3new, CFramenew, Color3fromRGB, Color3fromHSV, Drawingnew, TweenInfonew = Vector2.new, Vector3.zero, Vector3.new, CFrame.new, Color3.fromRGB, Color3.fromHSV, Drawing.new, TweenInfo.new
local tablefind, tableremove, stringlower, stringsub, mathclamp = table.find, table.remove, string.lower, string.sub, math.clamp

local GameMetatable = getrawmetatable and getrawmetatable(game) or {
	__index = function(self, Index) return self[Index] end,
	__newindex = function(self, Index, Value) self[Index] = Value end
}

local __index = GameMetatable.__index
local __newindex = GameMetatable.__newindex
local getrenderproperty, setrenderproperty = getrenderproperty or __index, setrenderproperty or __newindex
local GetService = __index(game, "GetService")

--// Services

local RunService = GetService(game, "RunService")
local UserInputService = GetService(game, "UserInputService")
local TweenService = GetService(game, "TweenService")
local Players = GetService(game, "Players")

--// Service Methods

local LocalPlayer = __index(Players, "LocalPlayer")
local Camera = __index(workspace, "CurrentCamera")

local FindFirstChild, FindFirstChildOfClass = __index(game, "FindFirstChild"), __index(game, "FindFirstChildOfClass")
local GetDescendants = __index(game, "GetDescendants")
local WorldToViewportPoint = __index(Camera, "WorldToViewportPoint")
local GetPartsObscuringTarget = __index(Camera, "GetPartsObscuringTarget")
local GetMouseLocation = __index(UserInputService, "GetMouseLocation")
local GetPlayers = __index(Players, "GetPlayers")

--// Mobile Detection

local IsMobile = UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled
local TouchPosition = nil

--// Variables

local RequiredDistance, Typing, Running, ServiceConnections, Animation, OriginalSensitivity = 2000, false, false, {}
local Connect, Disconnect = __index(game, "DescendantAdded").Connect
local ESPObjects = {}

--// Checking for multiple processes

if AdvancedPVPMenu and AdvancedPVPMenu.Exit then
	AdvancedPVPMenu:Exit()
end

--// Get Touch/Mouse Position

local function GetInputPosition()
	if IsMobile then
		if TouchPosition then return TouchPosition end
		local Touch = UserInputService:GetTouchPosition(1)
		if Touch then return Vector2new(Touch.X, Touch.Y) end
		return Vector2new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
	else
		return GetMouseLocation(UserInputService)
	end
end

--// Environment

getgenv().AdvancedPVPMenu = {
	Settings = {
		-- Aimbot
		AimbotEnabled = true,
		TeamCheck = false,
		AliveCheck = true,
		WallCheck = false,
		Sensitivity = 0.1,
		LockPart = "Head",
		TriggerKey = Enum.UserInputType.MouseButton2,
		FOVRadius = 120,
		FOVVisible = true,
		
		-- ESP
		ESPEnabled = true,
		ESPBoxes = true,
		ESPNames = true,
		ESPDistance = true,
		ESPHealth = true,
		ESPTracers = false,
		ESPColor = Color3fromRGB(255, 0, 0),
		ESPTeamCheck = false,
		ESPMaxDistance = 1000,
		
		-- PVP Cheats
		SpeedEnabled = false,
		SpeedValue = 16,
		JumpPowerEnabled = false,
		JumpPowerValue = 50,
		InfiniteAmmo = false,
		NoRecoil = false,
		NoSpread = false,
		RapidFire = false,
		
		-- Misc
		AutoRespawn = false,
		NoClip = false,
		Fly = false,
		FlySpeed = 50
	},

	Locked = nil,
	FOVCircleOutline = Drawingnew("Circle"),
	FOVCircle = Drawingnew("Circle"),
	MenuUI = nil
}

local Environment = getgenv().AdvancedPVPMenu

setrenderproperty(Environment.FOVCircle, "Visible", false)
setrenderproperty(Environment.FOVCircleOutline, "Visible", false)

--// ESP Functions

local function CreateESP(player)
	if ESPObjects[player] then return end
	
	local ESPTable = {
		Box = Drawingnew("Square"),
		BoxOutline = Drawingnew("Square"),
		Name = Drawingnew("Text"),
		Distance = Drawingnew("Text"),
		Health = Drawingnew("Text"),
		HealthBar = Drawingnew("Line"),
		HealthBarOutline = Drawingnew("Line"),
		Tracer = Drawingnew("Line")
	}
	
	-- Box settings
	ESPTable.BoxOutline.Thickness = 3
	ESPTable.BoxOutline.Color = Color3fromRGB(0, 0, 0)
	ESPTable.BoxOutline.Transparency = 1
	ESPTable.BoxOutline.Filled = false
	
	ESPTable.Box.Thickness = 1
	ESPTable.Box.Transparency = 1
	ESPTable.Box.Filled = false
	
	-- Text settings
	ESPTable.Name.Size = 16
	ESPTable.Name.Center = true
	ESPTable.Name.Outline = true
	ESPTable.Name.Color = Color3fromRGB(255, 255, 255)
	
	ESPTable.Distance.Size = 14
	ESPTable.Distance.Center = true
	ESPTable.Distance.Outline = true
	ESPTable.Distance.Color = Color3fromRGB(200, 200, 200)
	
	ESPTable.Health.Size = 14
	ESPTable.Health.Outline = true
	ESPTable.Health.Color = Color3fromRGB(0, 255, 0)
	
	-- Health bar
	ESPTable.HealthBarOutline.Thickness = 4
	ESPTable.HealthBarOutline.Color = Color3fromRGB(0, 0, 0)
	ESPTable.HealthBarOutline.Transparency = 1
	
	ESPTable.HealthBar.Thickness = 2
	ESPTable.HealthBar.Transparency = 1
	
	-- Tracer
	ESPTable.Tracer.Thickness = 1
	ESPTable.Tracer.Transparency = 1
	
	ESPObjects[player] = ESPTable
end

local function RemoveESP(player)
	if ESPObjects[player] then
		for _, drawing in pairs(ESPObjects[player]) do
			drawing:Remove()
		end
		ESPObjects[player] = nil
	end
end

local function UpdateESP()
	if not Environment.Settings.ESPEnabled then
		for _, esp in pairs(ESPObjects) do
			for _, drawing in pairs(esp) do
				drawing.Visible = false
			end
		end
		return
	end
	
	for player, esp in pairs(ESPObjects) do
		local character = player.Character
		local humanoidRootPart = character and FindFirstChild(character, "HumanoidRootPart")
		local humanoid = character and FindFirstChildOfClass(character, "Humanoid")
		local head = character and FindFirstChild(character, "Head")
		
		if character and humanoidRootPart and humanoid and humanoid.Health > 0 then
			local pos, onScreen = WorldToViewportPoint(Camera, humanoidRootPart.Position)
			local headPos = WorldToViewportPoint(Camera, head.Position + Vector3new(0, 0.5, 0))
			local legPos = WorldToViewportPoint(Camera, humanoidRootPart.Position - Vector3new(0, 3, 0))
			
			local distance = (LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")) 
				and (LocalPlayer.Character.HumanoidRootPart.Position - humanoidRootPart.Position).Magnitude or 0
			
			if onScreen and distance < Environment.Settings.ESPMaxDistance then
				local Settings = Environment.Settings
				
				-- Team check
				if Settings.ESPTeamCheck and player.Team == LocalPlayer.Team then
					for _, drawing in pairs(esp) do
						drawing.Visible = false
					end
					return
				end
				
				local heightY = math.abs(headPos.Y - legPos.Y)
				local widthX = heightY / 2
				
				-- Box
				if Settings.ESPBoxes then
					esp.BoxOutline.Size = Vector2new(widthX, heightY)
					esp.BoxOutline.Position = Vector2new(pos.X - widthX / 2, pos.Y - heightY / 2)
					esp.BoxOutline.Visible = true
					
					esp.Box.Size = Vector2new(widthX, heightY)
					esp.Box.Position = Vector2new(pos.X - widthX / 2, pos.Y - heightY / 2)
					esp.Box.Color = Settings.ESPColor
					esp.Box.Visible = true
				else
					esp.Box.Visible = false
					esp.BoxOutline.Visible = false
				end
				
				-- Name
				if Settings.ESPNames then
					esp.Name.Text = player.Name
					esp.Name.Position = Vector2new(pos.X, headPos.Y - 25)
					esp.Name.Visible = true
				else
					esp.Name.Visible = false
				end
				
				-- Distance
				if Settings.ESPDistance then
					esp.Distance.Text = math.floor(distance) .. " studs"
					esp.Distance.Position = Vector2new(pos.X, legPos.Y + 5)
					esp.Distance.Visible = true
				else
					esp.Distance.Visible = false
				end
				
				-- Health
				if Settings.ESPHealth then
					local health = math.floor(humanoid.Health)
					local maxHealth = math.floor(humanoid.MaxHealth)
					local healthPercent = health / maxHealth
					
					esp.Health.Text = health .. " HP"
					esp.Health.Position = Vector2new(pos.X - widthX / 2 - 45, pos.Y - heightY / 2)
					esp.Health.Color = Color3fromRGB(255 * (1 - healthPercent), 255 * healthPercent, 0)
					esp.Health.Visible = true
					
					-- Health bar
					esp.HealthBarOutline.From = Vector2new(pos.X - widthX / 2 - 7, pos.Y - heightY / 2)
					esp.HealthBarOutline.To = Vector2new(pos.X - widthX / 2 - 7, pos.Y + heightY / 2)
					esp.HealthBarOutline.Visible = true
					
					local healthBarHeight = heightY * healthPercent
					esp.HealthBar.From = Vector2new(pos.X - widthX / 2 - 7, pos.Y + heightY / 2)
					esp.HealthBar.To = Vector2new(pos.X - widthX / 2 - 7, pos.Y + heightY / 2 - healthBarHeight)
					esp.HealthBar.Color = Color3fromRGB(255 * (1 - healthPercent), 255 * healthPercent, 0)
					esp.HealthBar.Visible = true
				else
					esp.Health.Visible = false
					esp.HealthBar.Visible = false
					esp.HealthBarOutline.Visible = false
				end
				
				-- Tracer
				if Settings.ESPTracers then
					local screenCenter = Vector2new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y)
					esp.Tracer.From = screenCenter
					esp.Tracer.To = Vector2new(pos.X, pos.Y)
					esp.Tracer.Color = Settings.ESPColor
					esp.Tracer.Visible = true
				else
					esp.Tracer.Visible = false
				end
			else
				for _, drawing in pairs(esp) do
					drawing.Visible = false
				end
			end
		else
			for _, drawing in pairs(esp) do
				drawing.Visible = false
			end
		end
	end
end

--// Modern UI Creation

local function CreateModernUI()
	local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
	
	-- Main ScreenGui
	local ScreenGui = Instance.new("ScreenGui")
	ScreenGui.Name = "AdvancedPVPMenu"
	ScreenGui.ResetOnSpawn = false
	ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	ScreenGui.Parent = PlayerGui
	
	-- Main Frame
	local MainFrame = Instance.new("Frame")
	MainFrame.Name = "MainFrame"
	MainFrame.Size = UDim2.new(0, 550, 0, 650)
	MainFrame.Position = UDim2.new(0.5, -275, 0.5, -325)
	MainFrame.BackgroundColor3 = Color3fromRGB(15, 15, 25)
	MainFrame.BorderSizePixel = 0
	MainFrame.Active = true
	MainFrame.Draggable = true
	MainFrame.Parent = ScreenGui
	
	local MainCorner = Instance.new("UICorner")
	MainCorner.CornerRadius = UDim.new(0, 20)
	MainCorner.Parent = MainFrame
	
	local MainStroke = Instance.new("UIStroke")
	MainStroke.Color = Color3fromRGB(100, 100, 255)
	MainStroke.Thickness = 2
	MainStroke.Transparency = 0.5
	MainStroke.Parent = MainFrame
	
	-- Top Bar
	local TopBar = Instance.new("Frame")
	TopBar.Size = UDim2.new(1, 0, 0, 70)
	TopBar.BackgroundColor3 = Color3fromRGB(20, 20, 35)
	TopBar.BorderSizePixel = 0
	TopBar.Parent = MainFrame
	
	local TopCorner = Instance.new("UICorner")
	TopCorner.CornerRadius = UDim.new(0, 20)
	TopCorner.Parent = TopBar
	
	local TopFix = Instance.new("Frame")
	TopFix.Size = UDim2.new(1, 0, 0, 20)
	TopFix.Position = UDim2.new(0, 0, 1, -20)
	TopFix.BackgroundColor3 = Color3fromRGB(20, 20, 35)
	TopFix.BorderSizePixel = 0
	TopFix.Parent = TopBar
	
	-- Title
	local Title = Instance.new("TextLabel")
	Title.Size = UDim2.new(1, -100, 0, 35)
	Title.Position = UDim2.new(0, 20, 0, 10)
	Title.BackgroundTransparency = 1
	Title.Text = "âš¡ ADVANCED PVP MENU"
	Title.TextColor3 = Color3fromRGB(255, 255, 255)
	Title.TextSize = 24
	Title.Font = Enum.Font.GothamBold
	Title.TextXAlignment = Enum.TextXAlignment.Left
	Title.Parent = TopBar
	
	local Subtitle = Instance.new("TextLabel")
	Subtitle.Size = UDim2.new(1, -100, 0, 20)
	Subtitle.Position = UDim2.new(0, 20, 0, 45)
	Subtitle.BackgroundTransparency = 1
	Subtitle.Text = "Mobile & PC Supported | ESP + Aimbot + Cheats"
	Subtitle.TextColor3 = Color3fromRGB(150, 150, 200)
	Subtitle.TextSize = 12
	Subtitle.Font = Enum.Font.Gotham
	Subtitle.TextXAlignment = Enum.TextXAlignment.Left
	Subtitle.Parent = TopBar
	
	-- Close Button
	local CloseBtn = Instance.new("TextButton")
	CloseBtn.Size = UDim2.new(0, 50, 0, 50)
	CloseBtn.Position = UDim2.new(1, -60, 0, 10)
	CloseBtn.BackgroundColor3 = Color3fromRGB(200, 50, 50)
	CloseBtn.Text = "âœ•"
	CloseBtn.TextColor3 = Color3fromRGB(255, 255, 255)
	CloseBtn.TextSize = 28
	CloseBtn.Font = Enum.Font.GothamBold
	CloseBtn.BorderSizePixel = 0
	CloseBtn.Parent = TopBar
	
	local CloseCorner = Instance.new("UICorner")
	CloseCorner.CornerRadius = UDim.new(0, 12)
	CloseCorner.Parent = CloseBtn
	
	CloseBtn.MouseButton1Click:Connect(function()
		MainFrame.Visible = false
	end)
	
	-- ScrollingFrame
	local ScrollFrame = Instance.new("ScrollingFrame")
	ScrollFrame.Size = UDim2.new(1, -20, 1, -90)
	ScrollFrame.Position = UDim2.new(0, 10, 0, 80)
	ScrollFrame.BackgroundColor3 = Color3fromRGB(20, 20, 30)
	ScrollFrame.BorderSizePixel = 0
	ScrollFrame.ScrollBarThickness = 6
	ScrollFrame.ScrollBarImageColor3 = Color3fromRGB(100, 100, 255)
	ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
	ScrollFrame.Parent = MainFrame
	
	local ScrollCorner = Instance.new("UICorner")
	ScrollCorner.CornerRadius = UDim.new(0, 15)
	ScrollCorner.Parent = ScrollFrame
	
	local ListLayout = Instance.new("UIListLayout")
	ListLayout.Padding = UDim.new(0, 15)
	ListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
	ListLayout.Parent = ScrollFrame
	
	local ListPadding = Instance.new("UIPadding")
	ListPadding.PaddingTop = UDim.new(0, 15)
	ListPadding.PaddingBottom = UDim.new(0, 15)
	ListPadding.Parent = ScrollFrame
	
	-- Helper functions
	local function CreateSection(name)
		local Section = Instance.new("Frame")
		Section.Name = name
		Section.Size = UDim2.new(1, -20, 0, 50)
		Section.BackgroundColor3 = Color3fromRGB(30, 30, 50)
		Section.BorderSizePixel = 0
		Section.Parent = ScrollFrame
		
		local SectionCorner = Instance.new("UICorner")
		SectionCorner.CornerRadius = UDim.new(0, 10)
		SectionCorner.Parent = Section
		
		local SectionLabel = Instance.new("TextLabel")
		SectionLabel.Size = UDim2.new(1, -20, 1, 0)
		SectionLabel.Position = UDim2.new(0, 15, 0, 0)
		SectionLabel.BackgroundTransparency = 1
		SectionLabel.Text = "ðŸ”¹ " .. name
		SectionLabel.TextColor3 = Color3fromRGB(150, 200, 255)
		SectionLabel.TextSize = 18
		SectionLabel.Font = Enum.Font.GothamBold
		SectionLabel.TextXAlignment = Enum.TextXAlignment.Left
		SectionLabel.Parent = Section
		
		return Section
	end
	
	local function CreateToggle(name, setting)
		local Toggle = Instance.new("Frame")
		Toggle.Size = UDim2.new(1, -20, 0, 45)
		Toggle.BackgroundColor3 = Color3fromRGB(25, 25, 40)
		Toggle.BorderSizePixel = 0
		Toggle.Parent = ScrollFrame
		
		local ToggleCorner = Instance.new("UICorner")
		ToggleCorner.CornerRadius = UDim.new(0, 10)
		ToggleCorner.Parent = Toggle
		
		local Label = Instance.new("TextLabel")
		Label.Size = UDim2.new(1, -100, 1, 0)
		Label.Position = UDim2.new(0, 15, 0, 0)
		Label.BackgroundTransparency = 1
		Label.Text = name
		Label.TextColor3 = Color3fromRGB(255, 255, 255)
		Label.TextSize = 15
		Label.Font = Enum.Font.Gotham
		Label.TextXAlignment = Enum.TextXAlignment.Left
		Label.Parent = Toggle
		
		local Button = Instance.new("TextButton")
		Button.Size = UDim2.new(0, 70, 0, 30)
		Button.Position = UDim2.new(1, -80, 0.5, -15)
		Button.BackgroundColor3 = Environment.Settings[setting] and Color3fromRGB(50, 200, 100) or Color3fromRGB(200, 50, 50)
		Button.Text = Environment.Settings[setting] and "ON" or "OFF"
		Button.TextColor3 = Color3fromRGB(255, 255, 255)
		Button.TextSize = 14
		Button.Font = Enum.Font.GothamBold
		Button.BorderSizePixel = 0
		Button.Parent = Toggle
		
		local ButtonCorner = Instance.new("UICorner")
		ButtonCorner.CornerRadius = UDim.new(0, 8)
		ButtonCorner.Parent = Button
		
		Button.MouseButton1Click:Connect(function()
			Environment.Settings[setting] = not Environment.Settings[setting]
			Button.Text = Environment.Settings[setting] and "ON" or "OFF"
			Button.BackgroundColor3 = Environment.Settings[setting] and Color3fromRGB(50, 200, 100) or Color3fromRGB(200, 50, 50)
		end)
		
		return Toggle
	end
	
	local function CreateSlider(name, setting, min, max, increment)
		local Slider = Instance.new("Frame")
		Slider.Size = UDim2.new(1, -20, 0, 60)
		Slider.BackgroundColor3 = Color3fromRGB(25, 25, 40)
		Slider.BorderSizePixel = 0
		Slider.Parent = ScrollFrame
		
		local SliderCorner = Instance.new("UICorner")
		SliderCorner.CornerRadius = UDim.new(0, 10)
		SliderCorner.Parent = Slider
		
		local Label = Instance.new("TextLabel")
		Label.Size = UDim2.new(1, -20, 0, 20)
		Label.Position = UDim2.new(0, 15, 0, 5)
		Label.BackgroundTransparency = 1
		Label.Text = name .. ": " .. Environment.Settings[setting]
		Label.TextColor3 = Color3fromRGB(255, 255, 255)
		Label.TextSize = 14
		Label.Font = Enum.Font.Gotham
		Label.TextXAlignment = Enum.TextXAlignment.Left
		Label.Parent = Slider
		
		local SliderBar = Instance.new("Frame")
		SliderBar.Size = UDim2.new(1, -30, 0, 8)
		SliderBar.Position = UDim2.new(0, 15, 1, -20)
		SliderBar.BackgroundColor3 = Color3fromRGB(40, 40, 60)
		SliderBar.BorderSizePixel = 0
		SliderBar.Parent = Slider
		
		local SliderBarCorner = Instance.new("UICorner")
		SliderBarCorner.CornerRadius = UDim.new(1, 0)
		SliderBarCorner.Parent = SliderBar
		
		local SliderFill = Instance.new("Frame")
		SliderFill.Size = UDim2.new((Environment.Settings[setting] - min) / (max - min), 0, 1, 0)
		SliderFill.BackgroundColor3 = Color3fromRGB(100, 150, 255)
		SliderFill.BorderSizePixel = 0
		SliderFill.Parent = SliderBar
		
		local SliderFillCorner = Instance.new("UICorner")
		SliderFillCorner.CornerRadius = UDim.new(1, 0)
		SliderFillCorner.Parent = SliderFill
		
		local SliderButton = Instance.new("TextButton")
		SliderButton.Size = UDim2.new(1, 0, 1, 0)
		SliderButton.BackgroundTransparency = 1
		SliderButton.Text = ""
		SliderButton.Parent = SliderBar
		
		SliderButton.MouseButton1Down:Connect(function()
			local mouse = LocalPlayer:GetMouse()
			local moveConnection
			moveConnection = mouse.Move:Connect(function()
				local relativeX = math.clamp(mouse.X - SliderBar.AbsolutePosition.X, 0, SliderBar.AbsoluteSize.X)
				local percent = relativeX / SliderBar.AbsoluteSize.X
				local value = math.floor(min + (max - min) * percent)
				value = math.clamp(value, min, max)
				
				Environment.Settings[setting] = value
				SliderFill.Size = UDim2.new(percent, 0, 1, 0)
				Label.Text = name .. ": " .. value
			end)
			
			local releaseConnection
			releaseConnection = UserInputService.InputEnded:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 then
					moveConnection:Disconnect()
					releaseConnection:Disconnect()
				end
			end)
		end)
		
		return Slider
	end
	
	local function CreateColorPicker(name, setting)
		local ColorPicker = Instance.new("Frame")
		ColorPicker.Size = UDim2.new(1, -20, 0, 45)
		ColorPicker.BackgroundColor3 = Color3fromRGB(25, 25, 40)
		ColorPicker.BorderSizePixel = 0
		ColorPicker.Parent = ScrollFrame
		
		local PickerCorner = Instance.new("UICorner")
		PickerCorner.CornerRadius = UDim.new(0, 10)
		PickerCorner.Parent = ColorPicker
		
		local Label = Instance.new("TextLabel")
		Label.Size = UDim2.new(1, -100, 1, 0)
		Label.Position = UDim2.new(0, 15, 0, 0)
		Label.BackgroundTransparency = 1
		Label.Text = name
		Label.TextColor3 = Color3fromRGB(255, 255, 255)
		Label.TextSize = 15
		Label.Font = Enum.Font.Gotham
		Label.TextXAlignment = Enum.TextXAlignment.Left
		Label.Parent = ColorPicker
		
		local colors = {
			Color3fromRGB(255, 0, 0),
			Color3fromRGB(255, 165, 0),
			Color3fromRGB(255, 255, 0),
			Color3fromRGB(0, 255, 0),
			Color3fromRGB(0, 255, 255),
			Color3fromRGB(0, 0, 255),
			Color3fromRGB(255, 0, 255),
			Color3fromRGB(255, 255, 255)
		}
		
		for i, color in ipairs(colors) do
			local ColorBtn = Instance.new("TextButton")
			ColorBtn.Size = UDim2.new(0, 25, 0, 25)
			ColorBtn.Position = UDim2.new(1, -40 - (i - 1) * 30, 0.5, -12.5)
			ColorBtn.BackgroundColor3 = color
			ColorBtn.Text = ""
			ColorBtn.BorderSizePixel = 0
			ColorBtn.Parent = ColorPicker
			
			local ColorCorner = Instance.new("UICorner")
			ColorCorner.CornerRadius = UDim.new(0, 6)
			ColorCorner.Parent = ColorBtn
			
			if Environment.Settings[setting] == color then
				local Selected = Instance.new("UIStroke")
				Selected.Color = Color3fromRGB(255, 255, 255)
				Selected.Thickness = 3
				Selected.Parent = ColorBtn
			end
			
			ColorBtn.MouseButton1Click:Connect(function()
				Environment.Settings[setting] = color
				for _, btn in pairs(ColorPicker:GetChildren()) do
					if btn:IsA("TextButton") then
						for _, child in pairs(btn:GetChildren()) do
							if child:IsA("UIStroke") then
								child:Destroy()
							end
						end
					end
				end
				local Selected = Instance.new("UIStroke")
				Selected.Color = Color3fromRGB(255, 255, 255)
				Selected.Thickness = 3
				Selected.Parent = ColorBtn
			end)
		end
		
		return ColorPicker
	end
	
	-- Create UI Elements
	CreateSection("AIMBOT")
	CreateToggle("Aimbot Enabled", "AimbotEnabled")
	CreateToggle("Team Check", "TeamCheck")
	CreateToggle("Alive Check", "AliveCheck")
	CreateToggle("Wall Check", "WallCheck")
	CreateToggle("FOV Circle Visible", "FOVVisible")
	CreateSlider("FOV Radius", "FOVRadius", 50, 300, 10)
	CreateSlider("
